---
title: "Contrast Algorithms for Linear Models"
author: "Craig A. Wendorf"
date: "`r Sys.Date()`"
output:
  html_document:
    toc: true
    toc_float: true
    toc_depth: 4
    collapse: true
    theme: cerulean
    highlight: default
    keep_md: TRUE
vignette: >
  %\VignetteIndexEntry{Using CALM Contrast Codes}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r,include=FALSE}
#suppress the warnings and other messages from showing in the knitted file.
knitr::opts_chunk$set(fig.width=7, fig.height=5,fig.path='figures/',echo=TRUE,warning=FALSE,message=FALSE)
```

```{r,include=FALSE}
library(CALM)
```

## Using CALM Contrast Codes

### Overview

`CALM` includes a complete set of commonly used coding schemes. These include extensions of the built-in contrast specifications in Base R and a modification of Venables's `codingMatrices` package. They can be used directly in linear model specifications.

### Available Contrast Codes

```{r}
mtcars
mtcars$cyl = factor(mtcars$cyl) 
tapply(mtcars$mpg,mtcars$cyl,mean)
```

#### Example: Treatment (First) Contrasts

```{r}
treatment.first(3,intercept=TRUE)
calm.decode(treatment.first(3,intercept=TRUE))
```

```{r}
contrasts(mtcars$cyl) = treatment.first(3)
summary(lm(mpg~cyl, mtcars))$coefficients
```

#### Example: Treatment (Last) Contrasts

```{r}
treatment.last(3,intercept=TRUE)
calm.decode(treatment.last(3,intercept=TRUE))
```

```{r}
contrasts(mtcars$cyl) = treatment.last(3)
summary(lm(mpg~cyl, mtcars))$coefficients
```

#### Example: Deviation (First) Contrasts

```{r}
deviation.first(3,intercept=TRUE)
calm.decode(deviation.first(3,intercept=TRUE))
```

```{r}
contrasts(mtcars$cyl) = deviation.first(3)
summary(lm(mpg~cyl, mtcars))$coefficients
```

#### Example: Deviation (Last) Contrasts

```{r}
deviation.last(3,intercept=TRUE)
calm.decode(deviation.last(3,intercept=TRUE))
```

```{r}
contrasts(mtcars$cyl) = deviation.last(3)
summary(lm(mpg~cyl, mtcars))$coefficients
```

#### Example: Helmert (Forward) Contrasts

```{r}
helmert.forward(3,intercept=TRUE)
calm.decode(helmert.forward(3,intercept=TRUE))
```

```{r}
contrasts(mtcars$cyl) = helmert.forward(3)
summary(lm(mpg~cyl, mtcars))$coefficients
```

#### Example: Helmert (Reverse) Contrasts

```{r}
helmert.reverse(3,intercept=TRUE)
calm.decode(helmert.reverse(3,intercept=TRUE))
```

```{r}
contrasts(mtcars$cyl) = helmert.reverse(3)
summary(lm(mpg~cyl, mtcars))$coefficients
```

#### Example: Repeated (Forward) Contrasts

```{r}
repeated.forward(3,intercept=TRUE)
calm.decode(repeated.forward(3,intercept=TRUE))
```

```{r}
contrasts(mtcars$cyl) = repeated.forward(3)
summary(lm(mpg~cyl, mtcars))$coefficients
```

#### Example: Repeated (Reverse) Contrasts

```{r}
repeated.reverse(3,intercept=TRUE)
calm.decode(repeated.reverse(3,intercept=TRUE))
```

```{r}
contrasts(mtcars$cyl) = repeated.reverse(3)
summary(lm(mpg~cyl, mtcars))$coefficients
```
